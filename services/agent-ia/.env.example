# Agent IA Environment Variables

# Core API Integration
CORE_API_URL=http://core-api:8000
CORE_API_TIMEOUT=30

# Service Authentication (para comunicaci√≥n segura con Core API)
# Generar con: python -c "import secrets; print(secrets.token_urlsafe(32))"
SERVICE_NAME=agent-ia
SERVICE_API_KEY=your-agent-ia-api-key-change-in-production

# Redis Configuration
REDIS_URL=redis://redis:6379
REDIS_POOL_SIZE=10

# WhatsApp Configuration
WHATSAPP_ACCESS_TOKEN=your-whatsapp-access-token
WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id
WHATSAPP_VERIFY_TOKEN=your-whatsapp-verify-token
WHATSAPP_WEBHOOK_SECRET=your-whatsapp-webhook-secret
WHATSAPP_API_VERSION=v18.0

# Telegram Configuration
TELEGRAM_BOT_TOKEN=your-telegram-bot-token
TELEGRAM_ENABLED=true

# ============================================
# AUDIO PROCESSING CONFIGURATION
# ============================================
# Primary strategy for audio processing
AUDIO_PRIMARY_STRATEGY=whisper  # whisper | anthropic | gemini

# Fallback configuration
AUDIO_FALLBACK_STRATEGY=openai  # openai | anthropic | gemini
AUDIO_FALLBACK_ENABLED=true

# Fallback triggers
AUDIO_FALLBACK_CONFIDENCE_THRESHOLD=0.6  # 60% minimum confidence
AUDIO_MIN_TRANSCRIPTION_LENGTH=10        # Minimum characters

# Transcription cache
AUDIO_TRANSCRIPTION_CACHE_ENABLED=true
AUDIO_TRANSCRIPTION_CACHE_TTL=86400      # 24 hours

# ============================================
# LLM Providers Configuration
# OpenAI - Recommended for production
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini  # Recommended: gpt-4o-mini ($0.15/1M tokens) | gpt-4o ($5/1M tokens)
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.3

ANTHROPIC_API_KEY=your-anthropic-api-key
ANTHROPIC_MODEL=claude-3-haiku-20240307
ANTHROPIC_MAX_TOKENS=1000

# Local LLM Configuration (optional)
LOCAL_LLM_ENABLED=false
LOCAL_LLM_URL=http://localhost:11434
LOCAL_LLM_MODEL=llama2

# NLP Configuration
NLP_FALLBACK_STRATEGY=regex,openai,anthropic,basic
NLP_TIMEOUT_SECONDS=10
NLP_MAX_RETRIES=3

# Circuit Breaker Configuration
CIRCUIT_BREAKER_FAILURE_THRESHOLD=3
CIRCUIT_BREAKER_TIMEOUT_SECONDS=300
CIRCUIT_BREAKER_EXPECTED_EXCEPTION=Exception

# Conversation Management
CONVERSATION_TTL_HOURS=1
MAX_CONVERSATION_TURNS=10

# Application Configuration
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO
API_V1_STR=/v1

# Rate Limiting
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_IP=100

# Webhook Security
WEBHOOK_SIGNATURE_VERIFICATION=true