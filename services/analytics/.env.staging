# Analytics Service - Staging Environment

# Database Configuration
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB:-teloo_v3_staging}
DATABASE_READ_REPLICA_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB:-teloo_v3_staging}
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30

# Redis Configuration
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379
REDIS_POOL_SIZE=10

# Event Processing
REDIS_EVENTS_CHANNEL=teloo:events
EVENT_BATCH_SIZE=100
EVENT_PROCESSING_INTERVAL_SECONDS=5

# KPI Calculation Configuration
REAL_TIME_KPIS_ENABLED=true
CACHE_FREQUENT_KPIS_TTL_SECONDS=900
BATCH_CALCULATION_ENABLED=true

# Cache Configuration
KPI_CACHE_TTL_SECONDS=300
DASHBOARD_CACHE_TTL_SECONDS=600
METRICS_CACHE_TTL_SECONDS=1800

# Batch Jobs Configuration
BATCH_JOB_DAILY_HOUR=2
BATCH_JOB_WEEKLY_DAY=1
BATCH_JOB_ENABLED=true

# Materialized Views
MATERIALIZED_VIEW_REFRESH_HOUR=1
MATERIALIZED_VIEW_ENABLED=true

# Alert Configuration
ALERTS_ENABLED=true
ALERT_CHECK_INTERVAL=300
ALERT_ERROR_RATE=0.05
ALERT_LATENCY_P95=300
ALERT_CONVERSION_RATE=0.1

# Email Configuration for Alerts
SMTP_SERVER=${SMTP_SERVER}
SMTP_PORT=${SMTP_PORT}
SMTP_USERNAME=${SMTP_USERNAME}
SMTP_PASSWORD=${SMTP_PASSWORD}
EMAIL_FROM=alerts-staging@teloo.com
ALERT_EMAIL_TO=${ALERT_EMAIL_TO}

# Slack Configuration for Alerts
SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}
SLACK_CHANNEL=#alerts-staging

# Dashboard Configuration
DASHBOARD_MAX_RESULTS=1000
DASHBOARD_DEFAULT_PERIOD_DAYS=30

# Application Configuration
ENVIRONMENT=staging
DEBUG=false
LOG_LEVEL=INFO
API_V1_STR=/v1

# CORS Configuration
BACKEND_CORS_ORIGINS=["https://staging-admin.teloo.com","https://staging-advisor.teloo.com"]

# Rate Limiting
RATE_LIMIT_PER_MINUTE=200

# Performance Configuration
MAX_CONCURRENT_CALCULATIONS=5
CALCULATION_TIMEOUT_SECONDS=30

# Monitoring
SENTRY_DSN=${SENTRY_DSN}
ENABLE_METRICS=true
